<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Static Content Hosting pattern</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/darshandsoni/asciidoctor-skins/css/material-teal.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Static Content Hosting pattern</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_context_and_problem">Context and problem</a></li>
<li><a href="#_solution">Solution</a></li>
<li><a href="#_issues_and_considerations">Issues and considerations</a></li>
<li><a href="#_when_to_use_this_pattern">When to use this pattern</a></li>
<li><a href="#_example">Example</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="title">References</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/static-content-hosting">Static Content Hosting pattern</a></p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website">Static website hosting in Azure Storage</a></p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-dotnet-shared-access-signature-part-1">shared access signatures</a></p>
</li>
<li>
<p><a href="valet-key.html">Valet Key Pattern</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Deploy static content to a cloud-based storage service that can deliver them directly to the client. This can reduce the need for potentially expensive compute instances.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_and_problem">Context and problem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Web applications typically include some elements of static content. This static content might include HTML pages and other resources such as images and documents that are available to the client, either as part of an HTML page (such as inline images, style sheets, and client-side JavaScript files) or as separate downloads (such as PDF documents).</p>
</div>
<div class="paragraph">
<p>Although web servers are optimized for dynamic rendering and output caching, they still have to handle requests to download static content. This consumes processing cycles that could often be put to better use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution">Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In most cloud hosting environments, you can put some of an application&#8217;s resources and static pages in a storage service. The storage service can serve requests for these resources, reducing load on the compute resources that handle other web requests. The cost for cloud-hosted storage is typically much less than for compute instances.</p>
</div>
<div class="paragraph">
<p>When hosting some parts of an application in a storage service, the main considerations are related to deployment of the application and to securing resources that aren&#8217;t intended to be available to anonymous users.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues_and_considerations">Issues and considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consider the following points when deciding how to implement this pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The hosted storage service must expose an HTTP endpoint that users can access to download the static resources. Some storage services also support HTTPS, so it&#8217;s possible to host resources in storage services that require SSL.</p>
</li>
<li>
<p>For maximum performance and availability, consider using a content delivery network (CDN) to cache the contents of the storage container in multiple datacenters around the world. However, you&#8217;ll likely have to pay for using the CDN.</p>
</li>
<li>
<p>Storage accounts are often geo-replicated by default to provide resiliency against events that might affect a datacenter. This means that the IP address might change, but the URL will remain the same.</p>
</li>
<li>
<p>When some content is located in a storage account and other content is in a hosted compute instance, it becomes more challenging to deploy and update the application. You might have to perform separate deployments, and version the application and content to manage it more easilyâ€”especially when the static content includes script files or UI components. However, if only static resources have to be updated, they can simply be uploaded to the storage account without needing to redeploy the application package.</p>
</li>
<li>
<p>Storage services might not support the use of custom domain names. In this case it&#8217;s necessary to specify the full URL of the resources in links because they&#8217;ll be in a different domain from the dynamically-generated content containing the links.</p>
</li>
<li>
<p>The storage containers must be configured for public read access, but it&#8217;s vital to ensure that they aren&#8217;t configured for public write access to prevent users being able to upload content.</p>
</li>
<li>
<p>Consider using a valet key or token to control access to resources that shouldn&#8217;t be available anonymously. See the <a href="valet-key.html">Valet Key pattern</a> for more information.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_to_use_this_pattern">When to use this pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This pattern is useful for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Minimizing the hosting cost for websites and applications that contain some static resources.</p>
</li>
<li>
<p>Minimizing the hosting cost for websites that consist of only static content and resources. Depending on the capabilities of the hosting provider&#8217;s storage system, it might be possible to entirely host a fully static website in a storage account.</p>
</li>
<li>
<p>Exposing static resources and content for applications running in other hosting environments or on-premises servers.</p>
</li>
<li>
<p>Locating content in more than one geographical area using a content delivery network that caches the contents of the storage account in multiple datacenters around the world.</p>
</li>
<li>
<p>Monitoring costs and bandwidth usage. Using a separate storage account for some or all of the static content allows the costs to be more easily separated from hosting and runtime costs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This pattern might not be useful in the following situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application needs to perform some processing on the static content before delivering it to the client. For example, it might be necessary to add a timestamp to a document.</p>
</li>
<li>
<p>The volume of static content is very small. The overhead of retrieving this content from separate storage can outweigh the cost benefit of separating it out from the compute resource.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example">Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Azure Storage supports serving static content directly from a storage container. Files are served through anonymous access requests. By default, files have a URL in a subdomain of <code>core.windows.net</code>, such as <code><a href="https://contoso.z4.web.core.windows.net/image.png" class="bare">https://contoso.z4.web.core.windows.net/image.png</a></code>. You can configure a custom domain name, and use Azure CDN to access the files over HTTPS. For more information, see <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blob-static-website">Static website hosting in Azure Storage</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/static-content-hosting-pattern.png" alt="static content hosting pattern">
</div>
</div>
<div class="paragraph">
<p>Static website hosting makes the files available for anonymous access. If you need to control who can access the files, you can store files in Azure blob storage and then generate <a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-dotnet-shared-access-signature-part-1">shared access signatures</a> to limit access.</p>
</div>
<div class="paragraph">
<p>The links in the pages delivered to the client must specify the full URL of the resource. If the resource is protected with a valet key, such as a shared access signature, this signature must be included in the URL.</p>
</div>
<div class="paragraph">
<p>A sample application that demonstrates using external storage for static resources is available on <a href="https://github.com/mspnp/cloud-design-patterns/tree/master/static-content-hosting">GitHub</a>. This sample uses configuration files to specify the storage account and container that holds the static content.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-22 13:10:08 UTC
</div>
</div>
</body>
</html>