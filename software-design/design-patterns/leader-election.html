<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Leader Election pattern</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/darshandsoni/asciidoctor-skins/css/material-teal.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Leader Election pattern</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_context_and_problem">Context and problem</a></li>
<li><a href="#_solution">Solution</a></li>
<li><a href="#_issues_and_considerations">Issues and considerations</a></li>
<li><a href="#_when_to_use_this_pattern">When to use this pattern</a></li>
<li><a href="#_next_steps">Next steps</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="title">References</div>
<div class="paragraph">
<p><strong>Election Algorithms</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/BullyExample.html">Bully Algorithm</a></p>
</li>
<li>
<p><a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/RingElectExample.html">Ring Algorithm</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Coordinate the actions performed by a collection of collaborating instances in a distributed application by electing one instance as the leader that assumes responsibility for managing the others. This can help to ensure that instances don&#8217;t conflict with each other, cause contention for shared resources, or inadvertently interfere with the work that other instances are performing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_and_problem">Context and problem</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A typical cloud application has many tasks acting in a coordinated manner. These tasks could all be instances running the same code and requiring access to the same resources, or they might be working together in parallel to perform the individual parts of a complex calculation.</p>
</div>
<div class="paragraph">
<p>The task instances might run separately for much of the time, but it might also be necessary to coordinate the actions of each instance to ensure that they don&#8217;t conflict, cause contention for shared resources, or accidentally interfere with the work that other task instances are performing.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a cloud-based system that implements horizontal scaling, multiple instances of the same task could be running at the same time with each instance serving a different user. If these instances write to a shared resource, it&#8217;s necessary to coordinate their actions to prevent each instance from overwriting the changes made by the others.</p>
</li>
<li>
<p>If the tasks are performing individual elements of a complex calculation in parallel, the results need to be aggregated when they all complete.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The task instances are all peers, so there isn&#8217;t a natural leader that can act as the coordinator or aggregator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solution">Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A single task instance should be elected to act as the leader, and this instance should coordinate the actions of the other subordinate task instances. If all of the task instances are running the same code, they are each capable of acting as the leader. Therefore, the election process must be managed carefully to prevent two or more instances taking over the leader role at the same time.</p>
</div>
<div class="paragraph">
<p>The system must provide a robust mechanism for selecting the leader. This method has to cope with events such as network outages or process failures. In many solutions, the subordinate task instances monitor the leader through some type of heartbeat method, or by polling. If the designated leader terminates unexpectedly, or a network failure makes the leader unavailable to the subordinate task instances, it&#8217;s necessary for them to elect a new leader.</p>
</div>
<div class="paragraph">
<p>There are several strategies for electing a leader among a set of tasks in a distributed environment, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Selecting the task instance with the lowest-ranked instance or process ID.</p>
</li>
<li>
<p>Racing to acquire a shared, distributed mutex. The first task instance that acquires the mutex is the leader. However, the system must ensure that, if the leader terminates or becomes disconnected from the rest of the system, the mutex is released to allow another task instance to become the leader.</p>
</li>
<li>
<p>Implementing one of the common leader election algorithms such as the <a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/BullyExample.html">Bully Algorithm</a> or the <a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/RingElectExample.html">Ring Algorithm</a>. These algorithms assume that each candidate in the election has a unique ID, and that it can communicate with the other candidates reliably.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues_and_considerations">Issues and considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consider the following points when deciding how to implement this pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The process of electing a leader should be resilient to transient and persistent failures.</p>
</li>
<li>
<p>It must be possible to detect when the leader has failed or has become otherwise unavailable (such as due to a communications failure). How quickly detection is needed is system dependent. Some systems might be able to function for a short time without a leader, during which a transient fault might be fixed. In other cases, it might be necessary to detect leader failure immediately and trigger a new election.</p>
</li>
<li>
<p>In a system that implements horizontal autoscaling, the leader could be terminated if the system scales back and shuts down some of the computing resources.</p>
</li>
<li>
<p>Using a shared, distributed mutex introduces a dependency on the external service that provides the mutex. The service constitutes a single point of failure. If it becomes unavailable for any reason, the system won&#8217;t be able to elect a leader.</p>
</li>
<li>
<p>Using a single dedicated process as the leader is a straightforward approach. However, if the process fails there could be a significant delay while it&#8217;s restarted. The resulting latency can affect the performance and response times of other processes if they&#8217;re waiting for the leader to coordinate an operation.</p>
</li>
<li>
<p>Implementing one of the leader election algorithms manually provides the greatest flexibility for tuning and optimizing the code.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_when_to_use_this_pattern">When to use this pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use this pattern when the tasks in a distributed application, such as a cloud-hosted solution, need careful coordination and there&#8217;s no natural leader.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Avoid making the leader a bottleneck in the system. The purpose of the leader is to coordinate the work of the subordinate tasks, and it doesn&#8217;t necessarily have to participate in this work itselfâ€”although it should be able to do so if the task isn&#8217;t elected as the leader.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This pattern might not be useful if:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There&#8217;s a natural leader or dedicated process that can always act as the leader. For example, it might be possible to implement a singleton process that coordinates the task instances. If this process fails or becomes unhealthy, the system can shut it down and restart it.</p>
</li>
<li>
<p>The coordination between tasks can be achieved using a more lightweight method. For example, if several task instances simply need coordinated access to a shared resource, a better solution is to use optimistic or pessimistic locking to control access.</p>
</li>
<li>
<p>A third-party solution is more appropriate. For example, the Microsoft Azure HDInsight service (based on Apache Hadoop) uses the services provided by Apache Zookeeper to coordinate the map and reduce tasks that collect and summarize data.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following guidance might also be relevant when implementing this pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This pattern has a downloadable <a href="https://github.com/mspnp/cloud-design-patterns/tree/master/leader-election">sample application</a>.</p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/previous-versions/msp-n-p/dn589774(v=pandp.10)">Autoscaling Guidance</a>. It&#8217;s possible to start and stop instances of the task hosts as the load on the application varies. Autoscaling can help to maintain throughput and performance during times of peak processing.</p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/previous-versions/msp-n-p/dn589773(v=pandp.10)">Compute Partitioning Guidance</a>. This guidance describes how to allocate tasks to hosts in a cloud service in a way that helps to minimize running costs while maintaining the scalability, performance, availability, and security of the service.</p>
</li>
<li>
<p>The <a href="https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap">Task-based Asynchronous pattern</a>.</p>
</li>
<li>
<p>An example illustrating the <a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/BullyExample.html">Bully Algorithm</a>.</p>
</li>
<li>
<p>An example illustrating the <a href="https://www.cs.colostate.edu/%7Ecs551/CourseNotes/Synchronization/RingElectExample.html">Ring Algorithm</a>.</p>
</li>
<li>
<p><a href="https://curator.apache.org/">Apache Curator</a> a client library for Apache ZooKeeper.</p>
</li>
<li>
<p>The article <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/Lease-Blob">Lease Blob (REST API)</a> on MSDN.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-22 13:10:08 UTC
</div>
</div>
</body>
</html>