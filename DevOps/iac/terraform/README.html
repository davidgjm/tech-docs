<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Terraform</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/darshandsoni/asciidoctor-skins/css/material-teal.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Terraform</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_concepts_internals">Concepts &amp; Internals</a>
<ul class="sectlevel2">
<li><a href="#_readings">Readings</a></li>
<li><a href="#_resource_addressing">Resource Addressing</a></li>
</ul>
</li>
<li><a href="#_terraform_init">Terraform <code>init</code></a>
<ul class="sectlevel2">
<li><a href="#_remote_state_azure">Remote state - Azure</a></li>
</ul>
</li>
<li><a href="#_terraform_import">Terraform <code>import</code></a>
<ul class="sectlevel2">
<li><a href="#_references_2">References</a></li>
<li><a href="#_concepts">Concepts</a></li>
<li><a href="#_cheatsheet">Cheatsheet</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_concepts_internals">Concepts &amp; Internals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_readings">Readings</h3>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.terraform.io/cli/state/resource-addressing">Resource Addressing</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_addressing"><a href="https://www.terraform.io/cli/state/resource-addressing">Resource Addressing</a></h3>
<div class="paragraph">
<p>A <em>resource address</em> is a string that identifies zero or more resource instances in your overall configuration.</p>
</div>
<div class="paragraph">
<p>An address is made up of two parts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>[module path][resource spec]</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_resource_spec">Resource spec</h4>
<div class="paragraph">
<p>A resource spec addresses a specific resource instance in the selected module. It has the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>resource_type.resource_name[instance index]</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resource_type</code> - Type of the resource being addressed.</p>
</li>
<li>
<p><code>resource_name</code> - User-defined name of the resource.</p>
</li>
<li>
<p><code>[instance index]</code> - (Optional) Index to select an instance from a resource that has multiple instances, surrounded by square bracket characters (<code>[</code> and <code>]</code>).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terraform_init">Terraform <code>init</code></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_remote_state_azure">Remote state - Azure</h3>
<div class="sect3">
<h4 id="_references">References</h4>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.terraform.io/language/settings/backends/azurerm" class="bare">https://www.terraform.io/language/settings/backends/azurerm</a></p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/developer/terraform/authenticate-to-azure?tabs=bash" class="bare">https://docs.microsoft.com/en-us/azure/developer/terraform/authenticate-to-azure?tabs=bash</a></p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/developer/terraform/store-state-in-azure-storage?tabs=azure-cli" class="bare">https://docs.microsoft.com/en-us/azure/developer/terraform/store-state-in-azure-storage?tabs=azure-cli</a></p>
</li>
<li>
<p><a href="https://www.terraform.io/language/state/backends" class="bare">https://www.terraform.io/language/state/backends</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_environment_setup">Environment setup</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/usr/bin/env bash</span>

<span class="nv">RESOURCE_GROUP_NAME</span><span class="o">=</span>your_resource_group
<span class="nv">STORAGE_ACCOUNT_NAME</span><span class="o">=</span>tfstate
<span class="nv">CONTAINER_NAME</span><span class="o">=</span>state
<span class="nv">STATE_FILE_NAME</span><span class="o">=</span>terraform.tfstate

<span class="nb">export </span><span class="nv">ARM_TENANT_ID</span><span class="o">=</span><span class="k">${</span><span class="nv">AZURE_TENANT_ID</span><span class="k">}</span>
<span class="nb">export </span><span class="nv">ARM_SUBSCRIPTION_ID</span><span class="o">=</span><span class="k">${</span><span class="nv">AZURE_SUBSCRIPTION_ID</span><span class="k">}</span>

<span class="nb">echo</span> <span class="s2">"Getting access key for storage account </span><span class="k">${</span><span class="nv">STORAGE_ACCOUNT_NAME</span><span class="k">}</span><span class="s2">"</span>
<span class="nv">ACCOUNT_KEY</span><span class="o">=</span><span class="si">$(</span>az storage account keys list <span class="nt">--resource-group</span> <span class="nv">$RESOURCE_GROUP_NAME</span> <span class="nt">--account-name</span> <span class="nv">$STORAGE_ACCOUNT_NAME</span> <span class="nt">--query</span> <span class="s1">'[0].value'</span> <span class="nt">-o</span> tsv<span class="si">)</span>
<span class="nb">export </span><span class="nv">ARM_ACCESS_KEY</span><span class="o">=</span><span class="nv">$ACCOUNT_KEY</span>

<span class="nb">echo</span> <span class="s2">"Initializing terraform backend"</span>
terraform init <span class="se">\</span>
<span class="nt">-backend</span><span class="o">=</span><span class="nb">true</span> <span class="se">\</span>
<span class="nt">-backend-config</span><span class="o">=</span><span class="nv">storage_account_name</span><span class="o">=</span><span class="k">${</span><span class="nv">STORAGE_ACCOUNT_NAME</span><span class="k">}</span> <span class="se">\</span>
<span class="nt">-backend-config</span><span class="o">=</span><span class="nv">container_name</span><span class="o">=</span><span class="k">${</span><span class="nv">CONTAINER_NAME</span><span class="k">}</span> <span class="se">\</span>
<span class="nt">-backend-config</span><span class="o">=</span><span class="nv">resource_group_name</span><span class="o">=</span><span class="k">${</span><span class="nv">RESOURCE_GROUP_NAME</span><span class="k">}</span> <span class="se">\</span>
<span class="nt">-backend-config</span><span class="o">=</span><span class="nv">key</span><span class="o">=</span><span class="k">${</span><span class="nv">STATE_FILE_NAME</span><span class="k">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terraform_import">Terraform <code>import</code></h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Terraform import is resource specific!!! Check the <em>import</em> section in the Terraform provider documentation for each resource type.
For example, the import instruction for Kubernetes names is described at <a href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/namespace#import" class="bare">https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/namespace#import</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_references_2">References</h3>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.terraform.io/cli/import" class="bare">https://www.terraform.io/cli/import</a></p>
</li>
<li>
<p><a href="https://www.terraform.io/cli/commands/import" class="bare">https://www.terraform.io/cli/commands/import</a></p>
</li>
<li>
<p><a href="https://gmusumeci.medium.com/how-to-import-an-existing-azure-resource-in-terraform-6d585f93ea02" class="bare">https://gmusumeci.medium.com/how-to-import-an-existing-azure-resource-in-terraform-6d585f93ea02</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concepts">Concepts</h3>
<div class="sect3">
<h4 id="_current_state_only">Current State Only</h4>
<div class="paragraph">
<p>The current implementation of Terraform import can only import resources into the state. It does not generate configuration. A future version of Terraform will also generate configuration.</p>
</div>
<div class="paragraph">
<p>Because of this, prior to running terraform import it is necessary to write manually a resource configuration block for the resource, to which the imported object will be mapped.</p>
</div>
<div class="paragraph">
<p>While this may seem tedious, it still gives Terraform users an avenue for importing existing resources.</p>
</div>
</div>
<div class="sect3">
<h4 id="_id">ID</h4>
<div class="paragraph">
<p><mark>ID is dependent on the resource type being imported.</mark> For example, for AWS instances it is the instance ID (i-abcd1234) but for AWS Route53 zones it is the zone ID (Z12ABC4UGMOZ2N). Please reference the provider documentation for details on the ID format. If you&#8217;re unsure, feel free to just try an ID. If the ID is invalid, you&#8217;ll just receive an error message.</p>
</div>
</div>
<div class="sect3">
<h4 id="_preparation">Preparation</h4>
<div class="paragraph">
<p>To import a resource, first write a resource block for it in your configuration, establishing the name by which it will be known to Terraform:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>resource "aws_instance" "example" {
  # ...instance configuration...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cheatsheet">Cheatsheet</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 54.5455%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Provider</th>
<th class="tableblock halign-left valign-top">Resource Type</th>
<th class="tableblock halign-left valign-top">ID Pattern</th>
<th class="tableblock halign-left valign-top">Command Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes_namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/namespace#import">namespace</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ terraform import kubernetes_namespace.n terraform-example-namespace</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes_config_map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/config_map#import">configmap</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ terraform import kubernetes_config_map.example default/my-config</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes_storage_class</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/storage_class#import">storageClass</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ terraform import kubernetes_storage_class.example terraform-example</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes_persistent_volume_claim</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/persistent_volume_claim#import">import note</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ terraform import kubernetes_persistent_volume_claim.example default/example-name</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">helm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>helm_release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://registry.terraform.io/providers/hashicorp/helm/latest/docs/resources/release#import"><code>namespace/name</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>$ terraform import helm_release.csi_driver_blob kube-system/blob-csi-driver</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-06-22 13:10:08 UTC
</div>
</div>
</body>
</html>